关于红黑树特别好的一篇文章  
https://www.jianshu.com/p/e136ec79235c  
此文章图1的叶子节点画的有问题，叶子节点都是为null的黑节点  
https://juejin.im/entry/58371f13a22b9d006882902d#%E7%BA%A2%E9%BB%91%E6%A0%91%E7%9A%84-5-%E4%B8%AA%E7%89%B9%E6%80%A7  
https://www.imooc.com/article/22894


红黑树在原有的二叉查找树基础上增加了如下几个要求：  
1.Every node is either red or black.  
2.The root is black.  
3.Every leaf (NIL) is black.  
4.If a node is red, then both its children are black.  
5.For each node, all simple paths from the node to descendant leaves contain the same number of black nodes.  

中文意思是：  
1.每个节点要么是红色，要么是黑色；  
2.根节点永远是黑色的；  
3.所有的叶节点都是是黑色的（注意这里说叶子节点其实是上图中的 NIL 节点）；  
4.每个红色节点的两个子节点一定都是黑色；  
5.从任一节点到其子树中每个叶子节点的路径都包含相同数量的黑色节点；  

这个时候性质4和性质5用途作为约束，即可保证任意节点到其每个叶子节点路径最长不会超过最短路径的2倍。原因如下：  

当某条路径最短时，这条路径必然都是由黑色节点构成。当某条路径长度最长时，这条路径必然是由红色和黑色节点相间构成（性质4限定了不能出现两个连续的红色节点）。而性质5又限定了从任一节点到其每个叶子节点的所有路径必须包含相同数量的黑色节点。此时，在路径最长的情况下，路径上红色节点数量 = 黑色节点数量。该路径长度为两倍黑色节点数量，也就是最短路径长度的2倍。  

红黑树能自平衡，它靠的三种操作：左旋、右旋和变色。    

特别需要注意左旋和右旋不会改变节点值之间的大小关系，旋转能保持红黑树平衡：当一边子树的结点少了，那么向另外一边子树“借”一些结点；当一边子树的结点多了，那么向另外一边子树“租”一些结点。  

红黑树解决了平衡搜索树的瘸腿问题，检索操作与平衡搜索树相同，插入操作不同，插入需要：左旋、右旋和变色  

**红黑树查找**  
因为红黑树是一颗二叉平衡树，并且查找不会破坏树的平衡，所以查找跟二叉平衡树的查找无异：  

1.从根结点开始查找，把根结点设置为当前结点；  
2.若当前结点为空，返回null；  
3.若当前结点不为空，用当前结点的key跟查找key作比较；  
4.若当前结点key等于查找key，那么该key就是查找目标，返回当前结点；  
5.若当前结点key大于查找key，把当前结点的左子结点设置为当前结点，重复步骤2；  
6.若当前结点key小于查找key，把当前结点的右子结点设置为当前结点，重复步骤2；  

**红黑树插入**  
插入操作包括两部分工作：一查找插入的位置；二插入后自平衡。  

a.查找插入的父结点很简单，跟查找操作区别不大：  
1.从根结点开始查找；  
2.若根结点为空，那么插入结点作为根结点，结束。  
3.若根结点不为空，那么把根结点作为当前结点；  
4.若当前结点为null，返回当前结点的父结点，结束。  
5.若当前结点key等于查找key，那么该key所在结点就是插入结点，更新结点的值，结束。  
6.若当前结点key大于查找key，把当前结点的左子结点设置为当前结点，重复步骤4；  
7.若当前结点key小于查找key，把当前结点的右子结点设置为当前结点，重复步骤4  

b.插入后的平衡  
ok，插入位置已经找到，把插入结点放到正确的位置就可以啦，但插入结点是应该是什么颜色呢？答案是红色。理由很简单，红色在父结点（如果存在）为黑色结点时，红黑树的黑色平衡没被破坏，不需要做自平衡操作。但如果插入结点是黑色，那么插入位置所在的子树黑色结点总是多1，必须做自平衡。
